(e=>{const a=window.location.pathname;if("/"===a&&(e("#login").show(),e("#logout").hide(),document.getElementById("addWine").disabled=!0,e(".modal").on("shown.bs.modal",function(){e(this).find("[autofocus]").focus()})),"/homepage"===a){e("#logout").show(),e("#login").hide(),document.getElementById("addWine").disabled=!1;const a=e("#wines-template").html(),t=Handlebars.compile(a);e.ajax({type:"GET",url:"/wines",success:a=>{e("#wines-in-journal").html(t(a))},error:e=>{alert("Error getting wines!")}})}e("#newUser").on("click",()=>{const a={username:e("#username").val(),password:e("#password").val()};e.ajax({type:"POST",url:"/users",data:a,success:e=>{window.location.replace("/homepage"),alert(`Welcome to Wine Journal ${e.user.username}!`)},error:()=>{alert("Error adding user!")}})}),e("#wines-table").delegate(".modalButton","click",function(){const a=e("#show-wine-template").html(),t=Handlebars.compile(a);e.ajax({type:"GET",url:`/add/${this.id}`,success:a=>{e("#show-wine").html(t(a))},error:()=>{alert("Error getting wine!")}})}),e("#showWineModal").delegate(".modalButton","click",function(){const a=e("#wine-edit-template").html(),t=Handlebars.compile(a);e.ajax({type:"GET",url:`/add/${this.id}`,success:a=>{e("#wine-modal-form").html(t(a))},error:()=>{alert("Error getting wine!")}})}),e("#saveWine").on("click",()=>{const a=e("#edit-wineId").val(),t={beerName:e("#edit-wineName").val(),winery:e("#edit-winery").val(),grapes:e("#edit-grapes").val(),country:e("#edit-country").val(),vintage:e("#edit-vintage").val(),price:e("#edit-price").val(),location:e("#edit-location").val(),rating:e("#edit-rating").val(),notes:e("#edit-notes").val()};e.ajax({type:"PATCH",url:`/add/${a}`,data:t,success:e=>{alert(`Updated ${e.wine.wineName}`),window.location.reload()},error:()=>{alert("Error saving wine!")}})}),e("#deleteWine").on("click",()=>{const a=e("#edit-wineId").val();e.ajax({type:"DELETE",url:`/add/${a}`,success:e=>{alert(`Deleted ${e.wine.wineName}`),window.location.reload()},error:()=>{alert("Error deleting wine!")}})})})(jQuery);